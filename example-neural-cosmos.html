<!DOCTYPE html>
<html>
<head>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            background: #000000; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(30, 41, 59, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            min-width: 200px;
        }
        
        #controls h3 {
            margin: 0 0 15px 0;
            color: #ffffff;
            font-size: 16px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            color: #94a3b8;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .control-group select,
        .control-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #475569;
            background: #1e293b;
            color: #ffffff;
            border-radius: 4px;
            font-size: 14px;
        }
        
        #download-btn {
            width: 100%;
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        #download-btn:hover { 
            background: #2563eb; 
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        #visualization-container {
            background: #000000;
            border-radius: 8px;
            box-shadow: 0 0 80px rgba(138, 43, 226, 0.4);
            display: inline-block;
        }
        
        /* Theme variations */
        body.light {
            background: #f8fafc;
        }
        
        body.light #visualization-container {
            background: #ffffff;
            box-shadow: 0 0 80px rgba(138, 43, 226, 0.2);
        }
        
        body.light #controls {
            background: rgba(255, 255, 255, 0.95);
        }
        
        body.light #controls h3 {
            color: #1e293b;
        }
        
        body.light .control-group label {
            color: #64748b;
        }
        
        body.light .control-group select,
        body.light .control-group input {
            background: #f1f5f9;
            color: #1e293b;
            border-color: #e2e8f0;
        }
    </style>
</head>
<body>
    <div id="controls">
        <h3>Export Options</h3>
        
        <div class="control-group">
            <label for="filename">Filename</label>
            <input type="text" id="filename" value="neural-cosmos" placeholder="Enter filename">
        </div>
        
        <div class="control-group">
            <label for="format">Format</label>
            <select id="format">
                <option value="png">PNG (Recommended)</option>
                <option value="jpeg">JPEG</option>
                <option value="webp">WebP</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="scale">Resolution Scale</label>
            <select id="scale">
                <option value="1">1x - Web (1200x800)</option>
                <option value="2">2x - Retina (2400x1600)</option>
                <option value="3" selected>3x - High DPI (3600x2400)</option>
                <option value="4">4x - Print (4800x3200)</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="quality">Quality (JPEG only)</label>
            <input type="range" id="quality" min="0.1" max="1" step="0.1" value="0.9">
            <small style="color: #64748b; font-size: 11px;">90%</small>
        </div>
        
        <div class="control-group">
            <label for="theme">Preview Theme</label>
            <select id="theme" onchange="changeTheme()">
                <option value="dark">Dark</option>
                <option value="light">Light</option>
            </select>
        </div>
        
        <button id="download-btn" onclick="downloadVisualization()">Download</button>
    </div>
    
    <div id="visualization-container">
        <svg id="visualization" width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
            <!-- Neural Cosmos: An Outlandish AI Visualization -->
            <defs>
                <!-- Radial gradients for cosmic effects -->
                <radialGradient id="cosmicCore">
                    <stop offset="0%" style="stop-color:#ff00ff;stop-opacity:1">
                        <animate attributeName="stop-color" values="#ff00ff;#00ffff;#ff00ff" dur="4s" repeatCount="indefinite"/>
                    </stop>
                    <stop offset="50%" style="stop-color:#8b2be2;stop-opacity:0.6"/>
                    <stop offset="100%" style="stop-color:#000033;stop-opacity:0.1"/>
                </radialGradient>
                
                <radialGradient id="neuronGlow">
                    <stop offset="0%" style="stop-color:#00ff88;stop-opacity:1"/>
                    <stop offset="60%" style="stop-color:#0088ff;stop-opacity:0.4"/>
                    <stop offset="100%" style="stop-color:#0044aa;stop-opacity:0"/>
                </radialGradient>
                
                <!-- Complex filters for visual effects -->
                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                
                <filter id="turbulence">
                    <feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="2" result="turbulence">
                        <animate attributeName="baseFrequency" values="0.01;0.02;0.01" dur="10s" repeatCount="indefinite"/>
                    </feTurbulence>
                    <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="10" xChannelSelector="R" yChannelSelector="G"/>
                </filter>
                
                <!-- Pattern for circuit board effect -->
                <pattern id="circuitPattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                    <rect width="100" height="100" fill="none"/>
                    <path d="M10,10 L90,10 M50,10 L50,50 L90,50 M10,50 L30,50 M10,90 L90,90 M50,50 L50,90" 
                          stroke="#00ff88" stroke-width="0.5" opacity="0.3" fill="none"/>
                    <circle cx="10" cy="10" r="2" fill="#00ff88" opacity="0.6"/>
                    <circle cx="90" cy="10" r="2" fill="#00ff88" opacity="0.6"/>
                    <circle cx="50" cy="50" r="3" fill="#ff00ff" opacity="0.8"/>
                    <circle cx="10" cy="90" r="2" fill="#00ff88" opacity="0.6"/>
                    <circle cx="90" cy="90" r="2" fill="#00ff88" opacity="0.6"/>
                </pattern>
                
                <!-- Animated linear gradient -->
                <linearGradient id="dataFlow" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff00ff;stop-opacity:0">
                        <animate attributeName="offset" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                    </stop>
                    <stop offset="50%" style="stop-color:#00ffff;stop-opacity:1">
                        <animate attributeName="offset" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                    </stop>
                    <stop offset="100%" style="stop-color:#ff00ff;stop-opacity:0">
                        <animate attributeName="offset" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                    </stop>
                </linearGradient>
            </defs>
            
            <!-- Background: Deep space -->
            <rect width="1200" height="800" fill="#000033"/>
            
            <!-- Stars field -->
            <g opacity="0.6">
                <circle cx="100" cy="100" r="1" fill="white"/>
                <circle cx="200" cy="50" r="0.5" fill="white"/>
                <circle cx="300" cy="150" r="1.5" fill="white"/>
                <circle cx="400" cy="200" r="0.8" fill="white"/>
                <circle cx="500" cy="80" r="1" fill="white"/>
                <circle cx="600" cy="180" r="0.6" fill="white"/>
                <circle cx="700" cy="120" r="1.2" fill="white"/>
                <circle cx="800" cy="60" r="0.7" fill="white"/>
                <circle cx="900" cy="140" r="1" fill="white"/>
                <circle cx="1000" cy="100" r="0.9" fill="white"/>
                <circle cx="1100" cy="160" r="1.1" fill="white"/>
                <circle cx="150" cy="300" r="0.8" fill="white"/>
                <circle cx="250" cy="350" r="1" fill="white"/>
                <circle cx="350" cy="400" r="0.6" fill="white"/>
                <circle cx="450" cy="320" r="1.3" fill="white"/>
                <circle cx="550" cy="380" r="0.7" fill="white"/>
                <circle cx="650" cy="420" r="1" fill="white"/>
                <circle cx="750" cy="360" r="0.9" fill="white"/>
                <circle cx="850" cy="440" r="1.2" fill="white"/>
                <circle cx="950" cy="400" r="0.8" fill="white"/>
                <circle cx="1050" cy="340" r="1" fill="white"/>
                <circle cx="120" cy="600" r="0.7" fill="white"/>
                <circle cx="320" cy="650" r="1.1" fill="white"/>
                <circle cx="520" cy="700" r="0.9" fill="white"/>
                <circle cx="720" cy="620" r="1" fill="white"/>
                <circle cx="920" cy="680" r="0.8" fill="white"/>
                <circle cx="1080" cy="640" r="1.2" fill="white"/>
            </g>
            
            <!-- Circuit board background pattern -->
            <rect width="1200" height="800" fill="url(#circuitPattern)" opacity="0.15"/>
            
            <!-- Central cosmic brain structure -->
            <g transform="translate(600, 400)">
                <!-- Outer cosmic ring -->
                <circle cx="0" cy="0" r="250" fill="none" stroke="url(#cosmicCore)" stroke-width="3" opacity="0.5" filter="url(#glow)">
                    <animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="20s" repeatCount="indefinite"/>
                </circle>
                
                <!-- Middle neural ring -->
                <circle cx="0" cy="0" r="180" fill="none" stroke="#00ff88" stroke-width="2" opacity="0.7" stroke-dasharray="10 5">
                    <animateTransform attributeName="transform" type="rotate" from="0 0 0" to="-360 0 0" dur="15s" repeatCount="indefinite"/>
                </circle>
                
                <!-- Inner data ring -->
                <circle cx="0" cy="0" r="120" fill="none" stroke="#ff00ff" stroke-width="1.5" opacity="0.8" stroke-dasharray="20 10">
                    <animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="10s" repeatCount="indefinite"/>
                </circle>
                
                <!-- Core -->
                <circle cx="0" cy="0" r="60" fill="url(#cosmicCore)" filter="url(#glow)">
                    <animate attributeName="r" values="60;70;60" dur="2s" repeatCount="indefinite"/>
                </circle>
            </g>
            
            <!-- Neural network connections -->
            <g opacity="0.8">
                <!-- Main neural pathways -->
                <path d="M300,200 Q600,300 900,200" stroke="url(#dataFlow)" stroke-width="2" fill="none" filter="url(#glow)"/>
                <path d="M300,600 Q600,500 900,600" stroke="url(#dataFlow)" stroke-width="2" fill="none" filter="url(#glow)"/>
                <path d="M200,400 Q400,400 600,400 Q800,400 1000,400" stroke="#00ff88" stroke-width="1.5" fill="none" opacity="0.6"/>
                
                <!-- Synaptic connections -->
                <path d="M350,250 L600,400 L850,250" stroke="#ff00ff" stroke-width="1" fill="none" opacity="0.4" stroke-dasharray="5 3">
                    <animate attributeName="stroke-dashoffset" values="0;8" dur="1s" repeatCount="indefinite"/>
                </path>
                <path d="M350,550 L600,400 L850,550" stroke="#00ffff" stroke-width="1" fill="none" opacity="0.4" stroke-dasharray="5 3">
                    <animate attributeName="stroke-dashoffset" values="0;8" dur="1s" repeatCount="indefinite"/>
                </path>
            </g>
            
            <!-- Floating neurons -->
            <g filter="url(#glow)">
                <!-- Top left neuron cluster -->
                <g transform="translate(300, 200)">
                    <circle cx="0" cy="0" r="40" fill="url(#neuronGlow)">
                        <animate attributeName="r" values="40;45;40" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="0" cy="0" r="20" fill="#00ff88" opacity="0.8"/>
                    <text x="0" y="5" text-anchor="middle" font-family="monospace" font-size="16" fill="white">AI</text>
                </g>
                
                <!-- Top right neuron cluster -->
                <g transform="translate(900, 200)">
                    <circle cx="0" cy="0" r="40" fill="url(#neuronGlow)">
                        <animate attributeName="r" values="40;45;40" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="0" cy="0" r="20" fill="#ff00ff" opacity="0.8"/>
                    <text x="0" y="5" text-anchor="middle" font-family="monospace" font-size="16" fill="white">ML</text>
                </g>
                
                <!-- Bottom left neuron cluster -->
                <g transform="translate(300, 600)">
                    <circle cx="0" cy="0" r="40" fill="url(#neuronGlow)">
                        <animate attributeName="r" values="40;45;40" dur="3s" begin="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="0" cy="0" r="20" fill="#00ffff" opacity="0.8"/>
                    <text x="0" y="5" text-anchor="middle" font-family="monospace" font-size="16" fill="black">LLM</text>
                </g>
                
                <!-- Bottom right neuron cluster -->
                <g transform="translate(900, 600)">
                    <circle cx="0" cy="0" r="40" fill="url(#neuronGlow)">
                        <animate attributeName="r" values="40;45;40" dur="3s" begin="0.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="0" cy="0" r="20" fill="#8b2be2" opacity="0.8"/>
                    <text x="0" y="5" text-anchor="middle" font-family="monospace" font-size="16" fill="white">AGI</text>
                </g>
            </g>
            
            <!-- Particle effects -->
            <g opacity="0.6">
                <circle cx="100" cy="400" r="3" fill="#00ff88">
                    <animateMotion path="M0,0 Q300,200 600,0 Q900,-200 1200,0" dur="10s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="10s" repeatCount="indefinite"/>
                </circle>
                <circle cx="1100" cy="400" r="3" fill="#ff00ff">
                    <animateMotion path="M0,0 Q-300,-200 -600,0 Q-900,200 -1200,0" dur="10s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="10s" repeatCount="indefinite"/>
                </circle>
                <circle cx="600" cy="100" r="3" fill="#00ffff">
                    <animateMotion path="M0,0 Q200,300 0,600 Q-200,300 0,0" dur="8s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="8s" repeatCount="indefinite"/>
                </circle>
                <circle cx="600" cy="700" r="3" fill="#8b2be2">
                    <animateMotion path="M0,0 Q-200,-300 0,-600 Q200,-300 0,0" dur="8s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0;1;0" dur="8s" repeatCount="indefinite"/>
                </circle>
            </g>
            
            <!-- Orbiting elements -->
            <g transform="translate(600, 400)">
                <!-- Data packets -->
                <g>
                    <animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" dur="5s" repeatCount="indefinite"/>
                    <rect x="150" y="-5" width="20" height="10" rx="5" fill="#00ff88" opacity="0.8"/>
                    <rect x="-170" y="-5" width="20" height="10" rx="5" fill="#ff00ff" opacity="0.8"/>
                    <rect x="-5" y="150" width="10" height="20" rx="5" fill="#00ffff" opacity="0.8"/>
                    <rect x="-5" y="-170" width="10" height="20" rx="5" fill="#8b2be2" opacity="0.8"/>
                </g>
            </g>
            
            <!-- Title and subtitle -->
            <g transform="translate(600, 100)">
                <text x="0" y="0" text-anchor="middle" font-family="monospace" font-size="48" font-weight="bold" fill="white" filter="url(#glow)">
                    NEURAL COSMOS
                </text>
                <text x="0" y="40" text-anchor="middle" font-family="monospace" font-size="18" fill="#00ff88" opacity="0.8">
                    Where AI Consciousness Meets Infinite Possibility
                </text>
            </g>
            
            <!-- Binary rain effect -->
            <g opacity="0.3" font-family="monospace" font-size="10" fill="#00ff88">
                <text x="100" y="0">
                    <animate attributeName="y" values="0;820" dur="5s" repeatCount="indefinite"/>
                    01001001
                </text>
                <text x="300" y="-100">
                    <animate attributeName="y" values="-100;720" dur="4s" repeatCount="indefinite"/>
                    11010110
                </text>
                <text x="500" y="-200">
                    <animate attributeName="y" values="-200;620" dur="6s" repeatCount="indefinite"/>
                    00110101
                </text>
                <text x="700" y="-50">
                    <animate attributeName="y" values="-50;770" dur="3.5s" repeatCount="indefinite"/>
                    10101010
                </text>
                <text x="900" y="-150">
                    <animate attributeName="y" values="-150;670" dur="5.5s" repeatCount="indefinite"/>
                    01110001
                </text>
                <text x="1100" y="-250">
                    <animate attributeName="y" values="-250;570" dur="4.5s" repeatCount="indefinite"/>
                    11001100
                </text>
            </g>
            
            <!-- Quantum entanglement visualization -->
            <g transform="translate(600, 650)" opacity="0.7">
                <path d="M-100,0 Q-50,-50 0,0 Q50,50 100,0" stroke="#ff00ff" stroke-width="2" fill="none" filter="url(#glow)">
                    <animate attributeName="d" 
                             values="M-100,0 Q-50,-50 0,0 Q50,50 100,0;
                                     M-100,0 Q-50,50 0,0 Q50,-50 100,0;
                                     M-100,0 Q-50,-50 0,0 Q50,50 100,0" 
                             dur="4s" repeatCount="indefinite"/>
                </path>
                <circle cx="-100" cy="0" r="5" fill="#ff00ff"/>
                <circle cx="0" cy="0" r="5" fill="#00ffff"/>
                <circle cx="100" cy="0" r="5" fill="#ff00ff"/>
            </g>
        </svg>
    </div>

    <script>
        // Configuration
        const config = {
            defaultFilename: 'neural-cosmos',
            defaultFormat: 'png',
            defaultScale: 3,
            defaultQuality: 0.9
        };
        
        // Update quality label
        document.getElementById('quality').addEventListener('input', function(e) {
            const label = e.target.nextElementSibling;
            label.textContent = Math.round(e.target.value * 100) + '%';
        });
        
        // Theme switcher
        function changeTheme() {
            const theme = document.getElementById('theme').value;
            document.body.className = theme;
        }
        
        // Main download function
        function downloadVisualization() {
            const svg = document.getElementById('visualization');
            const svgData = new XMLSerializer().serializeToString(svg);
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            // Get user options
            const filename = document.getElementById('filename').value || config.defaultFilename;
            const format = document.getElementById('format').value;
            const scaleFactor = parseInt(document.getElementById('scale').value);
            const quality = parseFloat(document.getElementById('quality').value);
            
            // Set canvas dimensions
            canvas.width = svg.width.baseVal.value * scaleFactor;
            canvas.height = svg.height.baseVal.value * scaleFactor;
            
            // Scale the context
            ctx.scale(scaleFactor, scaleFactor);
            
            img.onload = function() {
                // Set background for JPEG (doesn't support transparency)
                if (format === 'jpeg') {
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }
                
                // Enable image smoothing
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';
                
                // Draw the image
                ctx.drawImage(img, 0, 0);
                
                // Convert to blob and download
                const mimeType = format === 'png' ? 'image/png' : 
                               format === 'jpeg' ? 'image/jpeg' : 
                               'image/webp';
                
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${filename}.${format}`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, mimeType, quality);
            };
            
            // Load the SVG as an image
            img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));
        }
        
        // Keyboard shortcut
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                downloadVisualization();
            }
        });
    </script>
</body>
</html>